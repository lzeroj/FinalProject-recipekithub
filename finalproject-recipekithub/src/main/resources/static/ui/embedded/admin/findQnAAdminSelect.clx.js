/*
 * App URI: embedded/admin/findQnAAdminSelect
 * Source Location: embedded/admin/findQnAAdminSelect.clx
 *
 * This file was generated by eXBuilder6 compiler(1.0.4584), Don't edit manually.
 */
(function() {
	var app = new cpr.core.App("embedded/admin/findQnAAdminSelect", { 
		onPrepare: function(loader) {
		},
		onCreate: function(/* cpr.core.AppInstance */ app, exports) {
			var linker = {};
			// Start - User Script
			/************************************************
			 * findQnAAdminSelect.js
			 * Created at 2023. 8. 20. 오후 12:58:06.
			 *
			 * @author shj22k
			 ************************************************/

			/*
			 * 루트 컨테이너에서 load 이벤트 발생 시 호출.
			 * 앱이 최초 구성된후 최초 랜더링 직후에 발생하는 이벤트 입니다.
			 */
			function onBodyLoad(e){
				var host = app.getHost();
				var val = host.initValue;
				app.lookup("ipb1").text = val.boardTitle;
				app.lookup("txa1").text = val.boardContent;
				app.lookup("ipb1").redraw();
				app.lookup("txa1").redraw();
				
			}

			/*
			 * "답변 달기" 버튼에서 click 이벤트 발생 시 호출.
			 * 사용자가 컨트롤을 클릭할 때 발생하는 이벤트.
			 */
			function onButtonClick(e){
				var button = e.control;
				
				/* 버티컬 레이아웃 마지막 인덱스에 컨트롤 추가 */
				var vcIpb = new cpr.controls.InputBox();
				vcIpb.style.css({
					"borderRadius" : "10px" 
				});
				vcIpb.value = "RE : 안녕하세요 Recipe-Kit-Hub 입니다";
				app.lookup("grp2").addChild(vcIpb, {
					width : "300px",
					height : "40px",
					autoSize : "none"
				});
				
				// 텍스트 에어리어 추가
				var textArea = new cpr.controls.TextArea();
				textArea.style.css({
					"borderRadius" : "10px" 
				});
				textArea.value = "안녕하세요 Recipe-Kit-Hub 관리자 SHJ 입니다";
				app.lookup("grp2").addChild(textArea, {
					width : "300px",
					height : "200px",
					autoSize : "none"
				});
				
				// 버튼 추가
				var vcBtn = new cpr.controls.Button();
				vcBtn.style.css({
					"backgroundImage" : "none",
					"backgroundColor" : "#0ebc59",
					"color" : "#FFFFFF"
				});
				vcBtn.id = "btn3";
				vcBtn.value = "등록하기";
				vcBtn.addEventListener("click", function(e){
					var dataMap = app.lookup("dmqnaselect");
					var host = app.getHost();
					var val = host.initValue;
					dataMap.setValue("boardId", val.boardId);
					dataMap.setValue("boardAnswerTitle", vcIpb.text);
					dataMap.setValue("boardAnswerContent", textArea.text);
					app.lookup("subinsertqnaanswer").send();
				});
				app.lookup("grp2").addChild( vcBtn, {
					width : "100px",
					height : "30px",
					autoSize : "width"
				});
				
			}

			/*
			 * 서브미션에서 submit-success 이벤트 발생 시 호출.
			 * 통신이 성공하면 발생합니다.
			 */
			function onSubinsertqnaanswerSubmitSuccess(e){
				var subinsertqnaanswer = e.control;
				var metadata = subinsertqnaanswer.getMetadata("insertResult");
				console.log(metadata);
				console.log(metadata.insertResult);
				if(metadata == 1){
					alert("등록에 성공하였습니다");
				}
			};
			// End - User Script
			
			// Header
			var dataMap_1 = new cpr.data.DataMap("dmqnaselect");
			dataMap_1.parseData({
				"columns" : [
					{"name": "boardId"},
					{
						"name": "boardAnswerTitle",
						"dataType": "string"
					},
					{
						"name": "boardAnswerContent",
						"dataType": "string"
					}
				]
			});
			app.register(dataMap_1);
			var submission_1 = new cpr.protocols.Submission("subinsertqnaanswer");
			submission_1.action = "/insertQnAAnswer";
			submission_1.addRequestData(dataMap_1);
			if(typeof onSubinsertqnaanswerSubmitSuccess == "function") {
				submission_1.addEventListener("submit-success", onSubinsertqnaanswerSubmitSuccess);
			}
			app.register(submission_1);
			app.supportMedia("all and (min-width: 1860px)", "new-screen");
			app.supportMedia("all and (min-width: 1024px) and (max-width: 1859px)", "default");
			app.supportMedia("all and (min-width: 500px) and (max-width: 1023px)", "tablet");
			app.supportMedia("all and (max-width: 499px)", "mobile");
			
			// Configure root container
			var container = app.getContainer();
			container.style.css({
				"width" : "100%",
				"height" : "100%"
			});
			
			// Layout
			var xYLayout_1 = new cpr.controls.layouts.XYLayout();
			container.setLayout(xYLayout_1);
			
			// UI Configuration
			var group_1 = new cpr.controls.Container();
			var xYLayout_2 = new cpr.controls.layouts.XYLayout();
			group_1.setLayout(xYLayout_2);
			(function(container){
				var group_2 = new cpr.controls.Container();
				var verticalLayout_1 = new cpr.controls.layouts.VerticalLayout();
				group_2.setLayout(verticalLayout_1);
				(function(container){
					var output_1 = new cpr.controls.Output();
					output_1.value = "Q & A 답변";
					output_1.style.css({
						"background-color" : "#FFFFFF",
						"color" : "#0fd465",
						"font-weight" : "bold",
						"font-size" : "18px",
						"font-family" : "푸른전남",
						"text-align" : "center"
					});
					container.addChild(output_1, {
						"width": "860px",
						"height": "50px"
					});
					var group_3 = new cpr.controls.Container("grp1");
					group_3.style.css({
						"background-color" : "#FFFFFF"
					});
					var verticalLayout_2 = new cpr.controls.layouts.VerticalLayout();
					verticalLayout_2.distribution = "center";
					group_3.setLayout(verticalLayout_2);
					(function(container){
						var inputBox_1 = new cpr.controls.InputBox("ipb1");
						inputBox_1.style.css({
							"border-radius" : "10px"
						});
						inputBox_1.bind("value").toDataMap(app.lookup("dmqnaselect"), "boardAnswerTitle");
						container.addChild(inputBox_1, {
							"width": "820px",
							"height": "40px"
						});
						var textArea_1 = new cpr.controls.TextArea("txa1");
						textArea_1.style.css({
							"border-radius" : "10px"
						});
						textArea_1.bind("value").toDataMap(app.lookup("dmqnaselect"), "boardAnswerContent");
						container.addChild(textArea_1, {
							"width": "820px",
							"height": "259px"
						});
						var group_4 = new cpr.controls.Container();
						var xYLayout_3 = new cpr.controls.layouts.XYLayout();
						group_4.setLayout(xYLayout_3);
						(function(container){
							var button_1 = new cpr.controls.Button();
							button_1.value = "답변 달기";
							button_1.style.css({
								"background-color" : "#0ebc59",
								"color" : "#FFFFFF",
								"background-image" : "none"
							});
							if(typeof onButtonClick == "function") {
								button_1.addEventListener("click", onButtonClick);
							}
							container.addChild(button_1, {
								"right": "0px",
								"width": "140px",
								"height": "30px",
								"top": "calc(50% - 15px)"
							});
						})(group_4);
						container.addChild(group_4, {
							"width": "820px",
							"height": "30px"
						});
						var group_5 = new cpr.controls.Container("grp2");
						var verticalLayout_3 = new cpr.controls.layouts.VerticalLayout();
						group_5.setLayout(verticalLayout_3);
						container.addChild(group_5, {
							"autoSize": "height",
							"width": "820px",
							"height": "289px"
						});
					})(group_3);
					container.addChild(group_3, {
						"autoSize": "height",
						"width": "860px",
						"height": "669px"
					});
				})(group_2);
				container.addChild(group_2, {
					"top": "10px",
					"bottom": "10px",
					"width": "860px",
					"left": "calc(50% - 430px)"
				});
			})(group_1);
			container.addChild(group_1, {
				"top": "0px",
				"left": "0px",
				"width": "1860px",
				"height": "739px"
			});
			if(typeof onBodyLoad == "function"){
				app.addEventListener("load", onBodyLoad);
			}
		}
	});
	app.title = "findQnAAdminSelect";
	cpr.core.Platform.INSTANCE.register(app);
})();
